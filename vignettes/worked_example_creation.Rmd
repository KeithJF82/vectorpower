---
title: "Worked Example 1 - Creating A New Data Set"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{worked_example_creation}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, echo=FALSE}
install.packages("devtools", repos='http://cran.us.r-project.org')
devtools::install_github("KeithJF82/vectorpower")
library(vectorpower)
```

## Worked example 1 - Creating a new data set

This is an example of how to create a new dataset folder and populate it with equilibrium starting data for a range of baseline malaria level values. The R code used here can also be found in the create_dataset.R file in the vectorpower/inst/ folder.

To create a new data set, it is necessary to specify the files to be used to load the parameter values governing the malaria model. Three files are used: 

-param_file, which contains the main set of model parameters along with the parameters used to calculate
rainfall as a function of time (which controls the seasonality of malaria)
-age_file, which specifies the age intervals used for the human population
-het_file, which specifies the parameter values controlling biting heterogeneity

In this example, the three parameter files are loaded from the online vectorpower repository. 

```{r} 
param_file=url("https://raw.githubusercontent.com/KeithJF82/vectorpower/master/inst/extdata/param_examples/model_parameters_Mali.txt")
age_file=url("https://raw.githubusercontent.com/KeithJF82/vectorpower/master/inst/extdata/param_examples/age_data_145.txt")
het_file=url("https://raw.githubusercontent.com/KeithJF82/vectorpower/master/inst/extdata/param_examples/het_data_9.txt")
```

If you are running the example on your own computer, you may wish to change input_location to specify the location of the example files in your offline copy of vectorpower, e.g.:
```{r}
# input_folder="C:/Users/YourName/GitHub/vectorpower/inst/extdata/param_examples/"
# param_file=paste(input_folder,"model_parameters_Mali.txt",sep="")
# age_file=paste(input_folder,"age_data_145.txt",sep="")
# het_file=paste(input_folder,"het_data_9.txt",sep="")
```

The location of the folder where the new data set is to be created must also be specified, along with the name of the new folder to create inside that folder where the files making up the dataset will be placed. You may wish to change output_location if you are running this example on your own computer.

If a folder with the same already exists and contains an existing dataset, the dataset files in that folder will be overwritten.
